{"ast":null,"code":"import { NavigationStart } from '@angular/router';\nimport { AlertType } from './alert.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"./alert.service\";\nimport * as i3 from \"@angular/common\";\nfunction AlertComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"div\", 1);\n    i0.ɵɵelementStart(2, \"button\", 2);\n    i0.ɵɵlistener(\"click\", function AlertComponent_div_0_Template_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const alert_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.removeAlert(alert_r1));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const alert_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(ctx_r0.cssClass(alert_r1));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", alert_r1.message, i0.ɵɵsanitizeHtml);\n  }\n}\nexport class AlertComponent {\n  constructor(router, alertService) {\n    this.router = router;\n    this.alertService = alertService;\n    this.id = 'default-alert';\n    this.fade = true;\n    this.alerts = [];\n  }\n  ngOnInit() {\n    // subscribe to new alert notifications\n    this.alertSubscription = this.alertService.onAlert(this.id).subscribe(alert => {\n      // clear alerts when an empty alert is received\n      if (!alert.message) {\n        // filter out alerts without 'keepAfterRouteChange' flag\n        this.alerts = this.alerts.filter(x => x.keepAfterRouteChange);\n        // remove 'keepAfterRouteChange' flag on the rest\n        this.alerts.forEach(x => delete x.keepAfterRouteChange);\n        return;\n      }\n      // add alert to array\n      this.alerts.push(alert);\n      // auto close alert if required\n      if (alert.autoClose) {\n        setTimeout(() => this.removeAlert(alert), 3000);\n      }\n    });\n    // clear alerts on location change\n    this.routeSubscription = this.router.events.subscribe(event => {\n      if (event instanceof NavigationStart) {\n        this.alertService.clear(this.id);\n      }\n    });\n  }\n  ngOnDestroy() {\n    // unsubscribe to avoid memory leaks\n    this.alertSubscription.unsubscribe();\n    this.routeSubscription.unsubscribe();\n  }\n  removeAlert(alert) {\n    // check if already removed to prevent error on auto close\n    if (!this.alerts.includes(alert)) return;\n    // fade out alert if this.fade === true\n    const timeout = this.fade ? 250 : 0;\n    alert.fade = this.fade;\n    setTimeout(() => {\n      // filter alert out of array\n      this.alerts = this.alerts.filter(x => x !== alert);\n    }, timeout);\n  }\n  cssClass(alert) {\n    if (!alert) return;\n    const classes = ['alert', 'alert-dismissible'];\n    const alertTypeClass = {\n      [AlertType.Success]: 'alert-success',\n      [AlertType.Error]: 'alert-danger',\n      [AlertType.Info]: 'alert-info',\n      [AlertType.Warning]: 'alert-warning'\n    };\n    if (alert.type !== undefined) {\n      classes.push(alertTypeClass[alert.type]);\n    }\n    if (alert.fade) {\n      classes.push('fade');\n    }\n    return classes.join(' ');\n  }\n}\nAlertComponent.ɵfac = function AlertComponent_Factory(t) {\n  return new (t || AlertComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AlertService));\n};\nAlertComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AlertComponent,\n  selectors: [[\"alert\"]],\n  inputs: {\n    id: \"id\",\n    fade: \"fade\"\n  },\n  decls: 1,\n  vars: 1,\n  consts: [[3, \"class\", 4, \"ngFor\", \"ngForOf\"], [3, \"innerHTML\"], [\"type\", \"button\", 1, \"btn-close\", 3, \"click\"]],\n  template: function AlertComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, AlertComponent_div_0_Template, 3, 4, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngForOf\", ctx.alerts);\n    }\n  },\n  dependencies: [i3.NgForOf],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["NavigationStart","AlertType","i0","AlertComponent","constructor","router","alertService","ngOnInit","alertSubscription","onAlert","id","subscribe","alert","message","alerts","filter","x","keepAfterRouteChange","forEach","push","autoClose","setTimeout","removeAlert","routeSubscription","events","event","clear","ngOnDestroy","unsubscribe","includes","timeout","fade","cssClass","classes","alertTypeClass","Success","Error","Info","Warning","type","undefined","join","selectors","inputs","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/lisa/lisagorewitdecker/basics-components/src/app/_alert/alert.component.ts","/Users/lisa/lisagorewitdecker/basics-components/src/app/_alert/alert.component.html"],"sourcesContent":["import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { Router, NavigationStart } from '@angular/router';\nimport { Subscription } from 'rxjs';\n\nimport { Alert, AlertType } from './alert.model';\nimport { AlertService } from './alert.service';\n\n@Component({ selector: 'alert', templateUrl: 'alert.component.html' })\nexport class AlertComponent implements OnInit, OnDestroy {\n  @Input() id = 'default-alert';\n  @Input() fade = true;\n\n  alerts: Alert[] = [];\n  alertSubscription!: Subscription;\n  routeSubscription!: Subscription;\n\n  constructor(private router: Router, private alertService: AlertService) { }\n\n  ngOnInit() {\n    // subscribe to new alert notifications\n    this.alertSubscription = this.alertService.onAlert(this.id)\n      .subscribe(alert => {\n        // clear alerts when an empty alert is received\n        if (!alert.message) {\n          // filter out alerts without 'keepAfterRouteChange' flag\n          this.alerts = this.alerts.filter(x => x.keepAfterRouteChange);\n\n          // remove 'keepAfterRouteChange' flag on the rest\n          this.alerts.forEach(x => delete x.keepAfterRouteChange);\n          return;\n        }\n\n        // add alert to array\n        this.alerts.push(alert);\n\n        // auto close alert if required\n        if (alert.autoClose) {\n          setTimeout(() => this.removeAlert(alert), 3000);\n        }\n      });\n\n    // clear alerts on location change\n    this.routeSubscription = this.router.events.subscribe(event => {\n      if (event instanceof NavigationStart) {\n        this.alertService.clear(this.id);\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    // unsubscribe to avoid memory leaks\n    this.alertSubscription.unsubscribe();\n    this.routeSubscription.unsubscribe();\n  }\n\n  removeAlert(alert: Alert) {\n    // check if already removed to prevent error on auto close\n    if (!this.alerts.includes(alert)) return;\n\n    // fade out alert if this.fade === true\n    const timeout = this.fade ? 250 : 0;\n    alert.fade = this.fade;\n\n    setTimeout(() => {\n      // filter alert out of array\n      this.alerts = this.alerts.filter(x => x !== alert);\n    }, timeout);\n  }\n\n  cssClass(alert: Alert) {\n    if (!alert) return;\n\n    const classes = ['alert', 'alert-dismissible'];\n\n    const alertTypeClass = {\n      [AlertType.Success]: 'alert-success',\n      [AlertType.Error]: 'alert-danger',\n      [AlertType.Info]: 'alert-info',\n      [AlertType.Warning]: 'alert-warning'\n    }\n\n    if (alert.type !== undefined) {\n      classes.push(alertTypeClass[alert.type]);\n    }\n\n    if (alert.fade) {\n      classes.push('fade');\n    }\n\n    return classes.join(' ');\n  }\n}\n","<div *ngFor=\"let alert of alerts\" class=\"{{cssClass(alert)}}\">\n  <div [innerHTML]=\"alert.message\"></div>\n  <button type=\"button\" class=\"btn-close\" (click)=\"removeAlert(alert)\"></button>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}